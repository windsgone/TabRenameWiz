# URL匹配规则功能实现计划

## 1. 数据结构设计
- [ ] 在`tabHistory`对象中为每个URL添加`matchRule`字段
  - 值为：`equals`(等于)、`startsWith`(开头等于)、`endsWith`(结尾等于)、`contains`(包含)
  - 默认值为`equals`
- [ ] 在`tabHistory`对象中添加`customUrl`字段，存储用户自定义的URL

## 2. 创建URL匹配规则组件
- [ ] 创建新的JS文件`src/js/utils/urlMatcher.js`
- [ ] 实现四种匹配逻辑的函数
- [ ] 实现多语言支持的匹配规则文本
- [ ] 导出创建和操作URL匹配规则UI的函数

## 3. 修改popup.html
- [ ] 在`form-part-one`上方添加URL匹配规则区域
- [ ] 添加初始状态的UI结构
- [ ] 添加展开状态的UI结构

## 4. 实现URL匹配规则UI交互
- [ ] 实现展开/收起按钮的交互逻辑
- [ ] 实现条件选择器的交互逻辑
- [ ] 实现URL输入框的交互逻辑
- [ ] 实现保存用户设置的逻辑

## 5. 修改URL匹配逻辑
- [ ] 修改表单提交处理函数
- [ ] 根据匹配规则判断当前URL是否符合条件
- [ ] 只有符合条件时才修改标签页标题和图标

## 6. 修改settings.html和settings.js
- [ ] 在settings.html中添加匹配条件列
- [ ] 修改settings.js中的表格生成逻辑
- [ ] 添加匹配条件列的数据显示
- [ ] 显示用户自定义的URL

## 7. 多语言支持
- [ ] 为新增的UI元素添加多语言支持
- [ ] 在国际化文件中添加新的文本条目
- [ ] 确保所有新UI元素使用i18n接口获取文本

## 8. 测试与调试
- [ ] 测试各种URL匹配规则的功能
- [ ] 测试UI交互
- [ ] 测试多语言支持
- [ ] 测试与现有功能的兼容性